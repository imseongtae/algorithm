# Excution Context
실행 컨텍스트(execution context)는 실행할 코드에 제공할 환경 정보들을 모아놓은 객체인데, 자바스크립트는 어떤 실행 컨텍스트가 활성화되는 시점에 변수를 위로 끌어올리고, 외부 환경 정보를 구성하고, this 값을 설정하는 등의 동작을 수행한다. 실행 컨텍스트는 동적 언어로서의 자바스크립트 특성이 잘 드러나는 개념이며, 다른 언어에서는 발견할 수 없는 특이한 현상이 발생한다.

## table of contents
1. [실행 컨텍스트란](#1.-실행-컨텍스트란)


## 1. 실행 컨텍스트란
실행 컨텍스트는 실행할 코드에 제공할 환경 정보들을 모아놓은 객체라고 정의할 수 있다. 

### Stack
**스택은 출입구가 하나뿐인 우물** 같은 데이터 구조이다. 스택에 데이터 a, b, c, d를 저장했다면, 꺼낼 때는 d, c, b, a의 순서대로 꺼낼 수밖에 없다. 데이터를 100개만 저장할 수 있는 우물에 100개 이상의 데이터를 넣으려고 할 경우 넘칠 수밖에 없는데 많은 프로그래밍 언어들은 이 경우 에러를 반환한다.

### Queue
**큐는 양쪽이 모두 열려 있는 파이프**를 연상하면 된다. 종류에 따라 양쪽 모두 입력과 출력이 가능한 큐도 있으나 보통은 한쪽은 입력만, 다른 한쪽은 출력만 담당하는 구조를 말한다. 큐에 순서대로 데이터 a, b, c, d를 저장했다면, 꺼낼 때도 마찬가지로 a, b, c, d의 순서대로 꺼내게 된다.

### 콜스택에 실행 컨텍스트가 쌓이는 순서에 대한 예제

```javascript
// (1)
var a = 1;

function outer() {
  function inner() {
    console.log(a); // undefined
    var a = 3;
  }
  inner(); // (2)
  console.log(a); // 1
}

outer(); // (3)
console.log(a); // 1
```

스택 구조에 따르면 한 실행 컨텍스트가 콜 스택의 맨 위에 쌓이는 순간이 곧 현재 실행할 코드에 관여하게 되는 시점임을 알 수 있다(기존 컨텍스트는 새로 쌓인 컨텍스트보다 아래 위치할 수밖에 없기 때문).  
자바스크립트 엔진은 어떤 실행 컨텍스트가 활성화될 때, 해당 컨텍스트에 관련된 코드들을 실행하는데 필요한 환경 정보들을 수집해서 실행 컨텍스트 객체에 다음과 같은 정보를 저장한다.

- **VariableEnvironment**: 현재 컨텍스트 내의 식별자들에 대한 정보와 외부 환경 정보. 선언 시점의 LexicalEnvironment 의 스냅샷으로, 변경 사항은 반영되지 않음
- **LexicalEnvironment**: 처음은 VariableEnvironment와 같지만 변경사항이 실시간으로 반영됨
- **ThisBindings**: this 식별자가 봐라봐야 할 대상 객체


